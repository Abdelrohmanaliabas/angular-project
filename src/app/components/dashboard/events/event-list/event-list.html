<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>
<div class="min-h-screen px-6 py-10 bg-gray-50 dark:bg-gray-900 transition-colors duration-500">
  <!-- Header -->
  <div class="flex justify-between items-center mb-8 border-b border-gray-300 dark:border-gray-700 pb-4">
    <h2 class="text-3xl font-bold text-gray-900 dark:text-white tracking-tight">
      Event Management
    </h2>
    <button
      class="px-5 py-2 rounded-lg bg-gradient-to-r from-pink-500 to-blue-500 text-white font-medium shadow-md hover:opacity-90 transition"
      [routerLink]="['/dashboard/event-creation']">
      <i class="fa-solid fa-plus mr-2"></i> Create Event
    </button>
  </div>

  <!-- Filters Section -->
  <div
    class="mb-10 flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between backdrop-blur-md bg-white/40 dark:bg-gray-800/50 p-5 rounded-2xl shadow-md transition">

    <!-- Search -->
    <div class="w-full lg:w-1/3 relative">
      <i class="pi pi-search absolute left-4 top-3 text-gray-400"></i>
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="applyFilters()"
        class="w-full pl-10 pr-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-pink-500 outline-none transition"
        placeholder="Search by title, speaker, or location..." />
    </div>

    <!-- Category -->
    <select
      [(ngModel)]="selectedCategoryName"
      (change)="applyFilters()"
      class="w-full lg:w-1/4 px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-pink-500 outline-none transition">
      <option value="">All Categories</option>
      <option *ngFor="let cat of categories" [value]="cat.name">{{ cat.name }}</option>
    </select>

    <!-- Status -->
    <select
      [(ngModel)]="selectedStatus"
      (change)="applyFilters()"
      class="w-full lg:w-1/4 px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-pink-500 outline-none transition">
      <option value="">All Statuses</option>
      <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
    </select>
  </div>

  <!-- Events Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
    <div
      *ngFor="let event of filteredEvents"
      class="relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden group hover:-translate-y-1 hover:shadow-2xl transition-all duration-300 border border-gray-200 dark:border-gray-700">

      <!-- Actions -->
      <div class="absolute top-4 right-4 flex gap-2 z-20">
        <i
          class="fa-solid fa-pen-to-square cursor-pointer text-blue-500 hover:text-blue-700 transition"
          (click)="updateEvent(event.id)">
        </i>
        <i
          class="fa-solid fa-trash cursor-pointer text-red-500 hover:text-red-700 transition"
          (click)="confirmDelete(event.id)">
        </i>
      </div>

      <!-- Image -->
      <div class="relative overflow-hidden">
        <img
          [src]="event.images?.[0] || 'assets/images/default.jpg'"
          alt="event image"
          class="w-full h-56 object-cover transition-transform duration-500 group-hover:scale-110" />
        <div
          class="absolute top-4 left-4 bg-pink-600/90 text-white px-3 py-1 rounded-full text-xs font-semibold shadow-md">
          {{ event.seat }} Seats Available
        </div>
      </div>

      <!-- Info -->
      <div class="p-5 space-y-3">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white truncate">{{ event.title }}</h3>

        <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
          <div class="flex items-center gap-2">
            <i class="fa-regular fa-user"></i>
            <span>{{ event.speakername }}</span>
          </div>
          <div class="flex items-center gap-2">
            <i class="fa-regular fa-clock"></i>
            <span>{{ event.startDate }} â†’ {{ event.endDate }}</span>
          </div>
        </div>

        <div class="flex items-center gap-2 text-gray-500 dark:text-gray-400">
          <i class="fa-solid fa-location-dot"></i>
          <span class="truncate">{{ event.address }}</span>
        </div>

        <div class="flex items-center justify-between mt-4">
          <span
            class="bg-gradient-to-r from-pink-500 to-purple-500 text-white px-3 py-1 rounded-full text-xs font-semibold shadow">
            {{ event.status }}
          </span>
          <button
            [routerLink]="['/dashboard/event-details', event.id]"
            class="text-sm font-medium text-pink-600 dark:text-pink-400 hover:underline transition">
            View Details â†’
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
